<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Expenses</title>

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="stylesheet" href="css/utils.css">
        <link rel="stylesheet" href="css/expense-list.css">
</head>

<body>
    <div class="container">
        <div class="left-menu-container">
        <div id="leftMenuContainer"> </div>
        </div> 
   
        <div style="flex: 1;">
            <h1 >Employee Expenses</h1>

            <table id="expenseListTable">
                <thead>
                    <tr>
                        <th> Name</th>
                        <!-- <th>Department</th> -->
                        <th>Expense Type</th>
                        <th>Amount</th>
                        <th>Date</th>
                        <th>Image</th>
                        <th>Status</th> 
                        <th>Action</th> 
                        
                    </tr>
                </thead>
                <tbody id="expenseListBody">
                    <!-- Table rows will be populated dynamically using JavaScript -->
                </tbody>
            </table>
        </div>
    </div>

    <script>

document.addEventListener('DOMContentLoaded', async function () {
            // // Fetch the left menu HTML
            const response = await fetch('left_menu.html');
            const leftMenuHTML = await response.text();
    
            // Inject the left menu into the container
            const leftMenuContainer = document.getElementById('leftMenuContainer');
            leftMenuContainer.innerHTML = leftMenuHTML;
        });

        // document.addEventListener('DOMContentLoaded', function () {
        //     const expenses = {
        //         "expenses": [
        //             {
        //                 "Name": "John Doe",
        //                 "Amount": 120.50,
        //                 // "Department":"Technical",
        //                 "Date": "2024-05-01",
        //                 // "Status": "Approved"
        //             },
                    // {
                    //     "EmpName": "Jane Smith",
                    //     "Amount": 85.20,
                    //     "Department":"Technical",
                    //     "ExpenseDate": "2024-04-25",
                    //     // "Status": "Approved"
                    // },
                    // {
                    //     "EmpName": "Mike Johnson",
                    //     "Amount": 200.00,
                    //     "Department":"Technical",
                    //    "ExpenseDate": "2024-05-02",
                    //     // "Status": "Pending"
                    // },
                    // {
                    //     "EmpName": "Sarah Brown",
                    //     "Amount": 150.75,
                    //     "Department":"Hr",
                    //     "ExpenseDate": "2024-04-29",
                    //     // "Status": "Approved"
                    // },
                    // {
                    //     "EmpName": "Chris Lee",
                    //     "Amount": 75.00,
                    //     "Department":"Finance",
                    //     "ExpenseDate": "2024-05-03",
                    //     // "Status": "Pending"
                    // },
                    // {
                    //     "EmpName": "Emily Wang",
                    //     "Amount": 300.90,
                    //     "Department":"Accounts",
                    //     "ExpenseDate": "2024-04-30",
                    //     // "Status": "Approved"
                    // },
                    // {
                    //     "EmpName": "David Miller",
                    //     "Amount": 180.60,
                    //     "Department":"Finance",
                    //     "ExpenseDate": "2024-05-05",
                    //     //"Status": "Pending"
                    // },
                    // {
                    //     "EmpName": "Lisa Garcia",
                    //     "Amount": 95.40,
                    //     "Department":"Hr",
                    //     "ExpenseDate": "2024-05-04",
                    //     //"Status": "Approved"
                    // },
                    // {
                    //     "EmpName": "Alex Turner",
                    //     "Amount": 110.25,
                    //     "Department":"Hr",
                    //     "ExpenseDate": "2024-05-01",
                    //     //"Status": "Approved"
                    // },
                    // {
                    //     "EmpName": "Sophia Martinez",
                    //     "Amount": 250.30,
                    //     "Department":"Finance",
                    //     "ExpenseDate": "2024-04-28",
                    //     //"Status": "Pending"
                    // }
            //     ]
            // };

            // const expenseBody = document.getElementById('expenseBody');

            // Loop through the expense data and create table rows
            // expenses.expenses.forEach(expense => {
            //     const row = document.createElement('tr');
            //     row.innerHTML = `
            //         <td>${expense.Name}</td>
                
            //         <td>$${expense.Amount}</td>
            //         <td>${expense.Date}</td>
            //         <td>${expense.Department}</td>
            //         <td>${expense.Image}</td>
                    
            // //     `;
            //     const actionCell = document.createElement('td');
            //     if (expense.Status === 'Pending') {
            //         actionCell.className = 'action-buttons';
            //         actionCell.innerHTML = `
            //     <button class="action-button action-approve"><i class="fas fa-check"></i></button>
            //     <button class="action-button action-reject"><i class="fas fa-times"></i></button>
            // `
            // ;
            //     }

            //     //Append action cell to the row
            //     row.appendChild(actionCell);
            //     expenseBody.appendChild(row);


            // });
        // });

       
        document.addEventListener('DOMContentLoaded', async function () {
    const expenseListBody = document.getElementById('expenseListBody');

    try {
        // Fetch expense data from your API
        const response = await fetch('http://localhost:8000/table/');
        const expenseDataList = await response.json();

        // Iterate over the received expense data and populate the expense list table
        expenseDataList.forEach(expenseData => {
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td>${expenseData.Name}</td>
                <td>${expenseData.Expense_Type}</td>
                <td>${expenseData.Amount}</td>
                <td>${expenseData.Date}</td>
                <td><img src="${expenseData.Image_Url}" alt="Receipt" style="max-width: 100px;"></td>
                <td>Pending</td>
                <td>
                    <!-- Add action buttons (e.g., Edit, Delete) as needed -->
                   <!-- <button onclick="editExpense(${expenseData.id})">accept </button>
                    <button onclick="deleteExpense(${expenseData.id})">reject</button>
                </td>-->
                <button class="action-button action-approve"><i class="fas fa-check"></i></button>
                <button class="action-button action-reject"><i class="fas fa-times"></i></button>
            `;
            expenseListBody.appendChild(newRow);
        });

    } catch (error) {
        console.error('Error fetching expense data:', error);
        
    }
});
    



       

        

      
    
    </script>
</body>

</html>